# h6 - Salataampa
## Harjoitukset tehty 29.9.2025 kotona klo 17:10-18:06. Koneena HP Envy x360 kannettava ja käyttöjärjestelmä Windows 10. Tehtävänannot opettajan ohjeiden mukaan (Karvinen, Linux-palvelimet).
## x) Tiivistelmät
### Let's Encrypt 2024:
- Let's Encryptin ACME-protokolla mahdollistaa HTTPS-serverin pystyttämisen
- Prosessissa on kaksi vaihetta, ensin ACME todistaa CA:lle (Certificate Authority) että palvelin hallitsee verkkotunnuksen
- Seuraavaksi tunnukselle voi pyytää tai peruuttaa varmenteita

Domain Validation:
- Kun ACME vuorovaikuttaa ensimmäisen kerran Let's Encryptin kanssa, luodaan uusi avainpari
- Seuraavaksi kysytään CA:lta miten voi todistaa että hallinnoi verkkotunnusta
- Suoritetaan vaaditut haasteet ja CA tarkistaa
- Kun haasteet on hyväksytty ohjelma saa hallita kyseisen verkkotunnuksen varmenteita

Certificate Issuance and Revocation:
- Kun ohjelma on varmistettu voi se hankkia ja peruuttaa sertifikaatteja verkkotunnukselle käyttäen hyväksyttyä avainparia

### Apache How-To:
SSL-konfiguraation pitää minimissään pitää sisällään seuraavaa:
```
LoadModule ssl_module modules/mod_ssl.so

Listen 443
<VirtualHost *:443>
    ServerName www.example.com
    SSLEngine on
    SSLCertificateFile "/path/to/www.example.com.cert"
    SSLCertificateKeyFile "/path/to/www.example.com.key"
</VirtualHost>
```
## a) Let's
Alkuun tarkistin että weppisivuni toimii ja siellähän se näkyi (myös puhelimella) :

<img width="443" height="174" alt="image" src="https://github.com/user-attachments/assets/e1127187-7c12-4ff2-947e-2ef81aa6f8cc" />

Avasin palomuuriin reiän 443-porttia varten (80 oli jo aikaisemmin avattu) ja tarkistin palomuurin statuksen:
<img width="597" height="278" alt="image" src="https://github.com/user-attachments/assets/4d668640-d047-424a-9dba-dd452729cfce" />

Seuraavaksi asensin certbotin opettajan ohjeiden mukaan:
<img width="882" height="212" alt="image" src="https://github.com/user-attachments/assets/1b44c72d-4998-4f80-9001-48d2981a1419" />

Ja käytin certbotia palvelimen sertifiointiin:
<img width="1045" height="387" alt="image" src="https://github.com/user-attachments/assets/2cd87012-71cd-481a-b17e-9096b72f2681" />

Certbot kuitenkin myös sanoi seuraavasti ja kehotti minua valitsemaan kahdesta vaihtoehdosta:
<img width="852" height="139" alt="image" src="https://github.com/user-attachments/assets/317ba69a-c8fc-45ca-915b-f0536628c150" />

Kokeilin valita vaihtoehdon 2 ja sain seuraavan ilmoituksen:
<img width="1173" height="200" alt="image" src="https://github.com/user-attachments/assets/cad86e9e-5bbc-4891-915f-5ca5e75f3f68" />

Nyt sekä ylikerttula.com että www.ylikerttula.com ovat saaneet Let's Encryptin verifioinnin:
<img width="594" height="192" alt="image" src="https://github.com/user-attachments/assets/eb30972e-0c3d-4f27-96ae-892ed3eacdf5" /><img width="598" height="169" alt="image" src="https://github.com/user-attachments/assets/b2e2e3b4-e862-4e98-8212-d542a7d90a5f" />

## b) A-rating
SSLLabs antoi seuraavan tuloksen sivulleni:
<img width="1342" height="773" alt="image" src="https://github.com/user-attachments/assets/e80328fb-ad11-4c1b-a5df-995f0f83efbc" />

Tarkempia tietoja tästä löytyy myös sivustolta: https://www.ssllabs.com/ssltest/analyze.html?d=ylikerttula.com

## Lähteet
- Apache. SSL/TLS Strong Encryption: How-To. Luettavissa: https://httpd.apache.org/docs/2.4/ssl/ssl_howto.html#configexample. Luettu 29.9.2025.
- Karvinen, T. Linux-palvelimet. Luettavissa: https://terokarvinen.com/linux-palvelimet/. Luettu 29.9.2025.
- Let's Encrypt. How It Works. Luettavissa: https://letsencrypt.org/how-it-works/. Luettu 29.9.2025.
