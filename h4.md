# h4 - Maailma kuulee
## x) Tiivistelmät artikkeleista ( Laine ja Karvinen)
Pilvipalvelimen vuokraus ja asennus:
- Halutusta palvelusta hankitaan virtuaalipalvelin, vahvistus pakollista esimerkiksi luottokortin kautta
-  Palvelua valitessa valitaan esimerkiksi haluttu paketti (prosessori, datan määrä) ja alue (mahdollisimman lähellä käyttäjiä)
-  Lopuksi palvelin suojataan joko salasanalla tai SSH-avaimella

Palomuuri:
- Virtuaalikoneella SSH-yhteys virtuaalipalvelimeen
- Päivitys (sudo apt-get update) ja palomuurin asennus (sudo apt-get install ufw)
- Palomuuriin reikä porttia varten (sudo ufw allow 22/tpc)
- Ja palomuuri päälle (sudo ufw enable)

Kotisivut palvelimelle: 
- Virtuaalipalvelimen terminaaliin lisätään käyttäjä (sudo adduser nimi) ja sille salasana
- Tehdään käyttäjästä pääkäyttäjä (sudo adduser nimi sudo)
- Jos testien perusteella SSH-yhteys on auki, lukitaan root (sudo usermod –lock root) ja tehdään toinen reikä palomuuriin (sudo ufw allow 80/tcp)
- Etusivun saa korvattua esimerkiksi komennolla echo Hello world! |sudo tee /var/www/html/index.html

Ohjelmien päivitys onnistuu seuraavilla komennoilla:
- $ sudo apt-get update
- $ sudo apt-get upgrade
- $ sudo apt-get dist-upgrade
## Harjoitukset tehty 15.9.2025 kotona klo 19:06-20:30. Koneena HP Envy x360 kannettava ja käyttöjärjestelmä Windows 10. Tehtävänannot opettajan ohjeiden mukaan (Karvinen, Linux-palvelimet).
## a) Virtuaalipalvelimen vuokraus
Rekisteröidyin jo viime viikon luennon aikana UpCloudiin ja tunnistauduin syöttämällä pankkikortin tiedot. Tästä jatkoin eteenpäin painamalla Deploy now ja valitsin vaihtoehdon Server:

<img width="769" height="695" alt="image" src="https://github.com/user-attachments/assets/46c18c6b-d256-4409-8641-20618b3553cf" />

Sijainniksi valitsin Helsingin:

<img width="811" height="770" alt="image" src="https://github.com/user-attachments/assets/459e3fd0-46f1-4c24-91cc-97d96bcf5408" />

Ja halvimman/pienimmän paketin:

<img width="817" height="730" alt="image" src="https://github.com/user-attachments/assets/377b3d2e-61bf-47ac-b3f1-4305fab4a120" />

Käyttöjärjestelmäksi valitsin Debianin:

<img width="826" height="690" alt="image" src="https://github.com/user-attachments/assets/26eef025-9fe8-473b-b7cc-b903c199eb23" />

Ja verkkovalinnoista kaikki:

<img width="815" height="510" alt="image" src="https://github.com/user-attachments/assets/bb50a36a-5a71-4fd4-a85f-40e0e3820892" />

Seuraavassa kohdassa olin aikonut valita salasanan kirjautumismetodiksi mutta se ei ollutkaan tarjolla. Onneksi UpCloudin sivuilta löytyi ohjeet SSH-avaimen luomiseen. Tätä varten jouduin asentamaan ssh:n palvelimelle:

<img width="811" height="423" alt="image" src="https://github.com/user-attachments/assets/b64a901e-7570-40cd-91d5-b9d15c5444c6" />

Sain sitten kuitenkin palvelimelle lisättyä SSH-avaimeni ja homma voi jatkua:

<img width="779" height="368" alt="image" src="https://github.com/user-attachments/assets/7f2aced0-928b-40dc-b098-859c3da43dd8" />

En ottanut opettajan ohjeiden mukaan mitään lisäpalveluita. Nyt serverini oli UpCloudissa luotu:

<img width="1238" height="474" alt="image" src="https://github.com/user-attachments/assets/16fb2b4e-f6d6-427c-b47f-ff53fccd0754" />

## b) Virtuaalipalvelimen alkutoimet
Seuraavaksi otin ssh-yhteyden palvelimeni juureen:

<img width="800" height="306" alt="image" src="https://github.com/user-attachments/assets/9a1d9bdf-d243-4ec7-ba8a-c7916f5695b3" />

Päivitin myös sudo apt-get update-komennolla. Seuraavaksi asensin palomuurin, tein siihen reiän porttia varten ja laitoin päälle:

<img width="751" height="248" alt="image" src="https://github.com/user-attachments/assets/047da8b1-404a-480b-a598-548a5a13d441" />

<img width="547" height="61" alt="image" src="https://github.com/user-attachments/assets/4347832a-9d44-4d74-80ed-aeecfa8ccde1" />

<img width="774" height="58" alt="image" src="https://github.com/user-attachments/assets/30b414b5-ab83-4cb2-85b5-b27e6ad155a8" />

Tein itselleni käyttäjän jolle lisäsin myös sudo ja adm-oikeudet:

<img width="564" height="248" alt="image" src="https://github.com/user-attachments/assets/b426190b-dd5a-43cb-9b25-5d9250d96cd4" />

Kokeilin toimiiko käyttäjä ja sain seuraavan viestin:

<img width="810" height="513" alt="image" src="https://github.com/user-attachments/assets/502b4070-da39-4110-8d3b-7300195925c1" />

Tajusin hetken pähkäilyn jälkeen että SSH-avaimeni ei ole oikean käyttäjän tiedoissa. Opettajan ohjeiden mukaan kopioin root-käyttäjältä tiedot emilia-käyttäjälle:

<img width="794" height="134" alt="image" src="https://github.com/user-attachments/assets/bf7fc2a7-094b-4d94-b5ca-63b7f902e451" />

Tämän jälkeen sain seuraavan virheen yhteyttä yrittäessä:

<img width="648" height="56" alt="image" src="https://github.com/user-attachments/assets/2577606c-262c-49ea-a267-2f972e3e99b0" />

SSH oli käynnissä ja palomuurissa 22/tcp kylläkin sallittuna:

<img width="616" height="137" alt="image" src="https://github.com/user-attachments/assets/6997a561-8bfe-43f0-940c-4528ebe8cd68" />

Tässä kohtaa en enää tiennyt mitä kokeilla kun olin tarkistanut että kaikki olisi sallittuna ja mikään ei toiminut. Koitin esimerkiksi tarkistaa että portti viittaa tuohon 22-osoitteeseen mitä se näytti kyllä tekevän:

<img width="804" height="214" alt="image" src="https://github.com/user-attachments/assets/21c1c26f-3352-4e08-a12e-70bab35192af" />

Tässä kohtaa oli pakko luovuttaa, eli en voinut loppujakaan tehtäviä suorittaa.

## Lähteet
- Karvinen, T. First Steps on a New Virtual Private Server. Luettavissa: https://terokarvinen.com/2017/first-steps-on-a-new-virtual-private-server-an-example-on-digitalocean/. Luettu 15.9.2025.
- Karvinen, T. Linux-palvelimet. Luettavissa: https://terokarvinen.com/linux-palvelimet/. Luettu 15.9.2025.
- Lehto, S. Teoriasta käytäntöön pilvipalvelimen avulla. Luettavissa: https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/. Luettu 15.9.2025.
- Upcloud. How to generate and use SSH keys. Luettavissa: https://upcloud.com/docs/guides/use-ssh-keys-authentication/. Luettu 15.9.2025.
