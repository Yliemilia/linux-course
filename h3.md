# h3 - Hello Web Server
## Harjoitukset tehty 8.9.2025 kotona klo 18:30-20:16. Koneena HP Envy x360 kannettava ja käyttöjärjestelmä Windows 10. Tehtävänannot opettajan ohjeiden mukaan (Karvinen, Linux-palvelimet).
## x) Tiivistelmä artikkeleista Name-based Virtual Host Support ja Name Based Virtual Hosts on Apache
Name-based vs. IP-based:
- IP-pohjaiset hostit käyttävät yhteyden IP-osoitetta palvelun määritykseen, eli jokainen host tarvitsee oman osoitteen
- name-based hostit tunnistavat nimen osana HTTP headereita, jolloin useammalla hostilla voi olla sama IP-osoite
- myös name-based valinnassa ensimmäinen askel on IP-osoitteen perusteella valitseminen
- nimen perusteella valitaan siis vasta kun vaihtoehtoja on suodatettu parhaan IP:n täsmäämisen perusteella
Jos haluat esimerkiksi lisätä domainille www.example.com uuden virtuaalihostin samalle IP-osoitteelle, voi sen tehdä esimerkiksi näin httpd.conf-tiedostossa:
~~~
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias example.com 
    DocumentRoot "/www/domain"
</VirtualHost>

<VirtualHost *:80>
    ServerName other.example.com
    DocumentRoot "/www/otherdomain"
</VirtualHost>
~~~
Name-based virtuaalihostin luomisen vaiheet Apachella:
1. Asenna weppiserveri
2. Lisää uusi name-based virtual host
3. Luo weppisivu tavallisena käyttäjänä
4. Testaa
## a) Weppipalvelin ja Apache-asennus
Apache asennettu viime viikon luennon aikana, status näytti näin:
<img width="823" height="524" alt="image" src="https://github.com/user-attachments/assets/622af63a-45c9-48f6-abd7-3f49bd90f768" />

Etusivua muokattu myös silloin ja se vastaa:

<img width="552" height="340" alt="image" src="https://github.com/user-attachments/assets/a0836527-85a0-4059-aae2-0fa60e48d998" />

## b) Lokirivit
Tail-komennolla access-lokeja pyytäessä tuli näkyviin seuraavat:

<img width="1262" height="450" alt="image" src="https://github.com/user-attachments/assets/c3b03149-87d8-47fd-a55e-f8d7cf03ef79" />

Alussa näkyy kun olen viime viikon tunnilla availlut ja päivitellyt sivuja. Tarkemmin voitaisiin katsoa kahta alimpaa. Ensimmäisessä avasin sivun jolloin Apache yritti noutaa iconia. Tätä ei kuitenkaan löydy, johon viittaa virhekoodi 404. 488 on tästä syntyneen vastauksen koko tavuina. Mozilla-Linux-Gecko-Firefox rivi kertoo käytössä olevasta selaimesta. Eli toiseksi viimeinen rivi tarkoittaa sitä, että Mozilla yritti ladata /favicon.ico mutta ei löytänyt sitä.

Viimeinen rivi syntyi kun päivitin avoinna olevan index-sivun. Sivua haettiin siis GET-metodilla rootista (/) HTTP 1.1 protokollalla. Koodi 304 tarkoittaa että selaimessa on jo cached copy, eli Apache ei lähetä uudelleen koko sivua.

Virhekoodien selityksiä katsoin Apachen dokumentaatiosta. (Apache2)

## c) hattu.example.com
Tein uuden conf-tiedoston hattu.example.com-sivulle komennolla _sudoedit /etc/apache2/sites-available/hattu.example.com.conf_
Tiedoston sisältö:

<img width="935" height="309" alt="image" src="https://github.com/user-attachments/assets/4f252fe2-3eac-42ef-892c-b3d1627b9fd0" />

Editoin käyttäjän public-sites kansion index.html-tiedostoa sisältämään seuraavan tiedon:

<img width="848" height="130" alt="image" src="https://github.com/user-attachments/assets/78918398-a46b-4f2f-be4a-180fc907e9c6" />

Editoin myös etc/hosts tiedoston sisältämään hattu.example.com-osoitteen:

<img width="792" height="286" alt="image" src="https://github.com/user-attachments/assets/edc05c60-241d-494d-8983-2b9a6735cc68" />

Seuraavaksi enabloin sivun ja latasin apachen uudestaan:

<img width="600" height="117" alt="image" src="https://github.com/user-attachments/assets/75b84dba-419a-4fe3-aed4-bd48f7ee9c8e" />

Tässä kohtaa en saanut vielä hommaa toimimaan vaan nettisivu näytti vanhan konfiguraation tiedot, joten tutkin asiaa tarkemmin ja löysin komennon jolla disabloin vanhan konfiguraation (ja myöhemmin ilmeni että piti disabloida myös 000-default.conf, jotta sain uuden toimimaan localhostina):

<img width="522" height="97" alt="image" src="https://github.com/user-attachments/assets/b2ab5d92-94fc-4958-ac29-aba51e180930" />

<img width="530" height="132" alt="image" src="https://github.com/user-attachments/assets/d9b17200-e8cd-4a17-99be-c4392b380a9b" />

Nyt hattu.example.com näkyy myös localhostina selaimessa:

<img width="561" height="179" alt="image" src="https://github.com/user-attachments/assets/03332a64-94ac-45ff-96e8-fe3855c3dfe7" />

## e) HTML5-sivu
Ohjeet HTML5-sivun tekemiseen sain opettajan sivulta (Karvinen, Short HTML5 page). Editoin index.html-tiedoston sisältämään seuraavaa:
<img width="846" height="298" alt="image" src="https://github.com/user-attachments/assets/3c280054-bd16-415b-b139-9816f9c000b8" />

Sivu näytti selaimessa tältä:

<img width="544" height="222" alt="image" src="https://github.com/user-attachments/assets/c30b5eea-671f-4ea1-b00d-8ed27adeac2c" />

validator.w3.org ei antanut virheitä index.html tiedostosta:

<img width="1201" height="310" alt="image" src="https://github.com/user-attachments/assets/6935c93f-c1a8-473a-8a02-194f1e1f8df3" />

## f) curl-komennot
Komento curl tulostaa pyydetyn sivun antaman vastauksen terminaaliin. Esimerkiksi jos kutsutaan localhostia:

<img width="460" height="254" alt="image" src="https://github.com/user-attachments/assets/67c37b1a-1848-4259-bed8-c2bd7e35d8e1" />

Komento curl -I taas ei näytä sivun sisältöä, vaan HTTP-response otsakkeet:

<img width="455" height="236" alt="image" src="https://github.com/user-attachments/assets/2fad8d9e-e067-4bef-b5b3-4b958ed86097" />

Date esimerkiksi kertoo tietenkin päivän ja ajan, Last-Modified milloin tiedostoa on viimeksi muokattu, Content-Length sisällön koon tavuina ja Content-Type sisällön tyypin (tässä teksti/html).

## Lähteet
- Apache. Name-based Virtual Host Support. Luettavissa: https://httpd.apache.org/docs/2.4/vhosts/name-based.html. Luettu 8.9.2025.
- Apache 2. HTTP Status Codes. Luettavissa: https://nightlies.apache.org/httpd/trunk/doxygen/group__HTTP__Status.html. Luettu 8.9.2025.
- Heinonen, J. Apache2. Luettavissa: https://github.com/johannaheinonen/johanna-test-repo/blob/main/linux-03092025.md. Luettu 8.9.2025.
- Karvinen, T. Linux-palvelimet. Luettavissa: https://terokarvinen.com/linux-palvelimet/. Luettu 8.9.2025.
- Karvinen, T. Name Based Virtual Hosts on Apache. Luettavissa: https://terokarvinen.com/2018/04/10/name-based-virtual-hosts-on-apache-multiple-websites-to-single-ip-address/. Luettu 8.9.2025.
- Karvinen, T. Short HTML5 page. Luettavissa: https://terokarvinen.com/2012/short-html5-page/. Luettu 8.9.2025.
